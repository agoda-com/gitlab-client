openapi: 3.0.0
info:
  title: GitLab Runner Management API
  version: 1.0
  description: API for managing GitLab Runners
servers:
- url: https://gitlab.example.com/api/v4
  description: GitLab API endpoint
paths:
  /api/v4/runners/{id}:
    get:
      summary: Get a runner
      description: Get details of a specific runner.
      operationId: getRunner
      parameters:
      - name: id
        in: path
        required: true
        description: The ID of the runner
        schema:
          type: integer
      responses:
        200:
          description: Runner details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API_Entities_Runner'
    put:
      summary: Update a runner
      description: Update details of a specific runner.
      operationId: updateRunner
      parameters:
      - name: id
        in: path
        required: true
        description: The ID of the runner
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/API_Entities_RunnerUpdate'
      responses:
        200:
          description: Runner updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/API_Entities_Runner'
    delete:
      summary: Delete a runner
      description: Remove a specific runner.
      operationId: deleteRunner
      parameters:
      - name: id
        in: path
        required: true
        description: The ID of the runner
        schema:
          type: integer
      responses:
        204:
          description: Runner deleted
  /api/v4/projects/{id}/runners:
    post:
      summary: Register a runner to a project
      description: Register an existing runner to a specific project.
      operationId: registerProjectRunner
      parameters:
      - name: id
        in: path
        required: true
        description: The ID of the project
        schema:
          type: integer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                runner_id:
                  type: integer
                  description: The ID of the runner to register
      responses:
        201:
          description: Runner registered to the project
  /api/v4/projects/{id}/runners/{runner_id}:
    delete:
      summary: Unregister a runner from a project
      description: Unregister a runner from a specific project.
      operationId: unregisterProjectRunner
      parameters:
      - name: id
        in: path
        required: true
        description: The ID of the project
        schema:
          type: integer
      - name: runner_id
        in: path
        required: true
        description: The ID of the runner to unregister
        schema:
          type: integer
      responses:
        204:
          description: Runner unregistered from the project
components:
  schemas:
    API_Entities_Runner:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 1
        description:
          type: string
          example: My runner
        active:
          type: boolean
          example: true
        is_shared:
          type: boolean
          example: false
        name:
          type: string
          example: Runner 1
        online:
          type: boolean
          example: true
        status:
          type: string
          example: active
    API_Entities_RunnerUpdate:
      type: object
      properties:
        description:
          type: string
        active:
          type: boolean
        tag_list:
          type: array
          items:
            type: string
        run_untagged:
          type: boolean
        locked:
          type: boolean
        access_level:
          type: string
          enum:
          - not_protected
          - ref_protected
