openapi: 3.0.0
info:
  title: GitLab Runner API
  version: '1.0'
  description: API for registering and listing GitLab Runners
servers:
  - url: 'https://gitlab.example.com/api/v4'
    description: GitLab API base URL

paths:
  /runners:
    post:
      summary: Register a new runner
      operationId: registerRunner
      tags:
        - runners
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RunnerRegistration'
      responses:
        '201':
          description: Runner registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Runner'
        '400':
          description: Bad request

    get:
      summary: List registered runners
      operationId: listRunners
      tags:
        - runners
      parameters:
        - in: query
          name: scope
          schema:
            type: string
          description: The scope of runners to show, one of: specific, shared, active, paused, online, or all
      responses:
        '200':
          description: A list of runners
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Runner'
        '400':
          description: Bad request

  /runners/all:
    get:
      summary: List all runners
      operationId: listAllRunners
      tags:
        - runners
      responses:
        '200':
          description: A list of all runners
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Runner'
        '400':
          description: Bad request

  /projects/{id}/runners:
    get:
      summary: List runners for a project
      operationId: listProjectRunners
      tags:
        - runners
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: The ID of the project
      responses:
        '200':
          description: A list of runners for the specified project
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Runner'
        '400':
          description: Bad request

  /groups/{id}/runners:
    get:
      summary: List runners for a group
      operationId: listGroupRunners
      tags:
        - runners
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: integer
          description: The ID of the group
      responses:
        '200':
          description: A list of runners for the specified group
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Runner'
        '400':
          description: Bad request

components:
  schemas:
    RunnerRegistration:
      type: object
      required:
        - token
      properties:
        token:
          type: string
          description: Registration token for the runner
        description:
          type: string
          description: Description of the runner
        active:
          type: boolean
          description: Whether the runner is active
        tag_list:
          type: array
          items:
            type: string
          description: List of tags for the runner
        locked:
          type: boolean
          description: Whether the runner is locked to the current project
        run_untagged:
          type: boolean
          description: Whether the runner can run untagged jobs
        maximum_timeout:
          type: integer
          description: Maximum timeout set for this runner

    Runner:
      type: object
      properties:
        id:
          type: integer
          description: The ID of the runner
        description:
          type: string
          description: Description of the runner
        active:
          type: boolean
          description: Whether the runner is active
        is_shared:
          type: boolean
          description: Whether the runner is shared
        ip_address:
          type: string
          description: IP Address of the runner
        online:
          type: boolean
          description: Whether the runner is online